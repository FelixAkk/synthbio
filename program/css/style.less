/**
 * Project Zelula
 *
 * Contextproject TI2800
 * TU Delft - University of Technology
 *
 * Authors:
 * 	Felix Akkermans, Niels Doekemeijer, Thomas van Helden
 * 	Albert ten Napel, Jan Pieter Waagmeester
 *
 * https://github.com/FelixAkk/synthbio
 *
 * @author Felix Akkermans
 */

/* SlateGrey */
@baseColor: #708090;

/* 1: Bright content on dark background, -1: Dark content on bright background */
@contrast: 1;

/* Page wide text base color */
@textColor: #FFF;

/* Determinds how much the text is blended in with the background. 0: none, 1: completely */
@textFade: 0.2;
/* Alternative base color derivative: lighten(desaturate(@baseColor, 30%), @contrast * 35%); */

@textColorFaded: fadeout(@textColor, @textFade * 100);
/* Ensure this is consistent with the dimensions of the used icon image (found in '..\img\icon-*') */

@iconSize: 24px;
/* Icon size multiplier to derive menu bar height */

@menuHeight: 1.75;

@grStart: darken(@baseColor, @contrast * 10%);

@grStop: darken(@baseColor, @contrast * 20%);

@titleWidth: 180px;

@tabWidth: @titleWidth + (@iconSize * 0.5)*2 + @iconSize;

@statusHeight: 24px; /* Height of the status bar */

@cornerRadius: 5px;

@borderHeight: 25%;

@gatesTabPadding: 10px;

@gatesWidth: 100px;

@gatesHeight: 50px;

@gatesPadding: 5px;


/** Section:
 * -----------------------------------
 * Mixin declaration
 * -----------------------------------
 */
.borderDown(@baseColor, @contrast, @borderHeight) {
	border: 1px solid darken(saturate(@baseColor, 5%), @contrast * @borderHeight);
}

.borderUp(@baseColor, @contrast, @borderHeight) {
	border: 1px solid lighten(saturate(@baseColor, 5%), @contrast * @borderHeight);
}

.cornerRadius(@cornerRadius) {
	  -webkit-border-radius: @cornerRadius; /* Saf 3-4, iOS 1-3.2, Android ≤1.6 */
		 -moz-border-radius: @cornerRadius; /* FF 1-3.6 */
			  border-radius: @cornerRadius;
}

.gradient(@grStart, @grStop) {
	background-color: @grStop;
	background-image: -webkit-gradient(linear, left top, left bottom, from(@grStart), to(@grStop)); /* Saf4+, Chrome */
	background-image: -webkit-linear-gradient(top, @grStart, @grStop); /* Chrome 10+, Saf5.1+, iOS 5+ */
	background-image:	-moz-linear-gradient(top, @grStart, @grStop); /* FF3.6 */
	background-image:	 -ms-linear-gradient(top, @grStart, @grStop); /* IE10 */
	background-image:	  -o-linear-gradient(top, @grStart, @grStop); /* Opera 11.10+ */
	background-image:		 linear-gradient(to bottom, @grStart, @grStop);
}
.unselectable() {
-webkit-touch-callout: none;
  -webkit-user-select: none;
   -khtml-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none; /* Introduced in IE 10. See http://ie.microsoft.com/testdrive/HTML5/msUserSelect/ */
          user-select: none;
}
.statusSpace() {
	bottom: @statusHeight + 1; /* Keep some distance for the status bar (+1 pixel for the border) */
}
.navSpace() {
	top: @iconSize * 1.75;
}

.gateBorder() {
  -webkit-box-shadow: 0px 0px 4px 0px #ffffff; /* Saf3-4, iOS 4.0.2 - 4.2, Android 2.3+ */
          box-shadow: 0px 0px 4px 0px #ffffff; /* Opera 10.5, IE9, FF4+, Chrome 6+, iOS 5 */
}

/**
 * Selftitled class
 */
.gate-border {
	.gateBorder();
}

/** Section:
 * -----------------------------------
 * Bootstrap.css overriding
 * -----------------------------------
 */
body {
	background-color: @baseColor;
}

.navbar {
	.borderDown(@baseColor, @contrast, @borderHeight);
	border-width: 0 0 1px 0; /* Bottom border only */
	box-shadow: 0 2px 10px rgba(0, 0, 0, 0.25);
	height: @iconSize * @menuHeight;
	min-width: 896px;
	width: 100%;
	position: relative;
	z-index: 100;
}

.navbar, .status, .summary {
    .gradient(@grStart, @grStop);
}

.nav {
	color: @textColorFaded;
	font-size: 18px;
	font-weight: bold;
}

.navbar .nav > li > a {
	color: lighten(@baseColor, 20%);
	&:hover {
		color: @textColorFaded;
	}
}

.dropdown .caret {
	margin-left: 5px;
	margin-top: 10px;
}
.navbar .nav .dropdown-toggle .caret, .navbar .nav .open.dropdown .caret {
	border-bottom-color: @textColorFaded;
	border-top-color: @textColorFaded;
}
.caret {
	opacity: 0.6;
}
.dropdown-menu a {
	font-size: 13px;
}

#files table td {
	cursor: pointer;
}

.modal-footer, #grid-container {
	input, textarea, select, .uneditable-input {
		margin-bottom: 0;
	}
}

.typeahead-group {
	display: inline;

    input {
		margin-right: 0;
	  -webkit-border-bottom-right-radius: 0; /* Saf 3-4, iOS 1-3.2, Android ≤1.6 */
		 -moz-border-bottom-right-radius: 0; /* FF 1-3.6 */
			  border-bottom-right-radius: 0;
	  -webkit-border-top-right-radius: 0; /* Saf 3-4, iOS 1-3.2, Android ≤1.6 */
		 -moz-border-top-right-radius: 0; /* FF 1-3.6 */
			  border-top-right-radius: 0;
    }
    /* only apply to the button that directly succeeds an input element, further buttons will be left untouched */
	input + button[type="submit"].btn {
		margin-left: -5px;
	  -webkit-border-bottom-left-radius: 0; /* Saf 3-4, iOS 1-3.2, Android ≤1.6 */
		 -moz-border-bottom-left-radius: 0; /* FF 1-3.6 */
			  border-bottom-left-radius: 0;
	  -webkit-border-top-left-radius: 0; /* Saf 3-4, iOS 1-3.2, Android ≤1.6 */
		 -moz-border-top-left-radius: 0; /* FF 1-3.6 */
			  border-top-left-radius: 0;
	}
}

/*
------------------------------
	Application styles
------------------------------
*/
#title {
	.borderDown(@baseColor, @contrast, @borderHeight);
	border-width: 0 1px 0 0; /* Right border only */
	background-color: rgba(0,0,0, 0.1); /* Fade */
	float: left;
	padding: (@iconSize * 0.5) 0 (@iconSize * 0.5) (@iconSize * 0.5)*2 + @iconSize;
	width: @titleWidth;
}

#icon {
	background: url("../img/icon-small-24px.png") no-repeat;
	position: absolute;
	height: @iconSize;
	width: @iconSize;
	left: (@iconSize * 0.5 * @menuHeight) - (@iconSize * 0.5);
	top: (@iconSize * 0.5 * @menuHeight) - (@iconSize * 0.5);
	opacity: 1 - @textFade;
}

#gates-tab {
	background-color: @grStart;
	.borderDown(@baseColor, @contrast, @borderHeight);
	border-width: 0 1px 0 0; /* Right border only */
	width: @tabWidth;
	.statusSpace;
	.navSpace;
	color: @textColorFaded;
	overflow: auto;
}

#gates-tab h3 {
	margin-left: @gatesTabPadding;
	margin-top: @gatesTabPadding;
}

#gates-tab p {
	margin-left: @gatesTabPadding;
	line-height: 10px;
}

.gates {
	.borderDown(@baseColor, @contrast, @borderHeight);
	.cornerRadius(@cornerRadius);
	box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.25);
	background-color: @baseColor;
	margin: @gatesTabPadding;
	padding: @gatesTabPadding;
}

.gate  {
    .unselectable();
	.cornerRadius(@cornerRadius);
	text-align: right;
	padding: @gatesPadding;
	cursor: pointer;
	position: relative;
	width: @gatesWidth;
	height: @gatesHeight;

	/*
	 * Hacky; This is required because for some reason the <embed> tag doesn't inherit styles, doesn't accept event
	 * listeners or whatever I try, to make it behave accordingly. So I masked it by placing a <div> over it which does.
	 */
	.mask {
		width: 100%;
		height: 100%;
		position: absolute;
		left: 0;
		top: 0;
	}
	&:hover {
		background-color: rgba(255,255,255, 0.15);
	}
}
/**
 * Some gate markup special for special cases
 */
#gates-transport .gate {
    margin-top: -50px;

	h4 {
		display: none;
	}

	p {
		display: none;
	}
}

#gates-tab .gate {
	width: auto;
	height: auto;

	.mask {
		width: @gatesWidth;
		height: @gatesHeight;
		position: absolute;
		/**
		 * This is so that the mask position corresponds with the internal padding of gates and fully covers the SVG.
		 */
		left: @gatesPadding;
		top: @gatesPadding;
	}

	embed {
		float: left;
	}
	
	p {
		margin: 0px;
	}
}

#grid-container {
	left: @tabWidth;
	.statusSpace;
	.navSpace;
	background-color: lighten(@baseColor, 20%);
	overflow: auto;

	box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.25);
	/*.borderDown(@baseColor, @contrast, 10%); */
	/*margin: 5px; */

	/**
	 * Only little extension to the general gate class is neeeded.
     */
	.gate {
		.gateBorder();
		position: absolute;
	}

	/**
	 * Order of this declaration being after .gate is important! These must overwrite gate!
	 */
	.input, .output {
	    width: auto;
		top: 35%;
	    min-height: 140px;
	    padding: 0;
	    .cornerRadius(0);
		.borderDown(@baseColor, @contrast, @borderHeight);
		 -webkit-box-shadow: 0px 0px 8px 0px rgba(0,0,0, 0.5); /* Saf3-4, iOS 4.0.2 - 4.2, Android 2.3+ */
		         box-shadow: 0px 0px 8px 0px rgba(0,0,0, 0.5); /* Opera 10.5, IE9, FF4+, Chrome 6+, iOS 5 */

		.handle {
		    display: block;
			color: @textColorFaded;
			text-shadow: 1px -1px 2px rgba(0, 0, 0, 0.5);
			text-align: center;
			border-width: 0 0 1px 0;
			padding: 4px 0 8px 0;

			.icon-grip {
				background-image: url("../img/grip.png");
				background-position: 3px 5px;
				opacity: 0.5;
				margin: 0 5px;
			}
		}
	}

	.input {
		left: 10px;
		right: auto;
		.handle {
			.gradient(darken(spin(@baseColor, -15), 10), spin(@baseColor, -15));
		}
	    background-color: spin(@baseColor, -15);
	    &:hover {
			background-color: spin(@baseColor, -15);
		}
	}

	.output {
		left: auto;
		right: 10px;
		.handle {
			.gradient(darken(spin(@baseColor, 15), 10), spin(@baseColor, 15));
		}
	    background-color: spin(@baseColor, 15);
	    &:hover {
			background-color: spin(@baseColor, 15);
		}
	}
}


.arrowLabel {
	.unselectable();
}


#grid {
}

.subscript {
	font-size: 9px;
}

.stretch {
	position: absolute;
	right: 0;
	top: 0;
	bottom: 0;
	left: 0;
}

.status {
	background-color: @grStart;
	.borderDown(@baseColor, @contrast, @borderHeight);
	color: @textColorFaded;
	border-width: 1px 0 0 0; /* Top border only */
	bottom: 0;
	height: @statusHeight;
	left: 0;
	line-height: 24px;
	position: absolute;
	width: 100%;
	z-index: 17;
	
	#info-icon {
		height: @statusHeight - 8;
		width: @statusHeight - 8;
		opacity: 1 - @textFade;
		padding: 0 6px;
	}
	
	#ping {
		float: right;
		margin-right: 5px;
		
		[class^="icon-"], [class*=" icon-"] {
			background: no-repeat scroll url('../img/connection-status.png');
			height: @statusHeight - 8;
			width: @statusHeight - 8;
			opacity: 1 - @textFade;
			vertical-align: middle;
			margin: 0 6px;
		}
		
		.icon-connecting {
			background-position: 0 0;
		}
		.icon-connected {
			background-position: -16px 0;
		}
		.icon-failed {
			background-position: -32px 0;
		}
	}
}

#gates-transport {
	.statusSpace;
	.navSpace;
	overflow: hidden;
	display: none;
}

/*
 * Styles for the define-inputs dialog
 */
#define-inputs{
	.x-axis{
		width: 50px;
		float: right;
		text-align: right;
	}
	.signal{
		clear: right;
		border-bottom: 1px dotted gray;
		padding: 10px 4px;
	}
	.toggle-highlow{
		display: inline-block;
		width: 10px;
		cursor: pointer;
	}
	.levels{
		display: inline-block;
		white-space: nowrap;
		
	}
	.levels div.tick{
		display: inline-block;
		background-color: #eee;
		width: 12px;
		height: 16px;
		cursor: pointer;
		
	}
	.levels div.low{
		border-bottom: 2px solid black;
	}
	.levels div.high{
		border-top: 2px solid black;
	}
	div.low +  div.high{
		border-left: 1px solid black;
		width: 11px;
	}
	div.high + div.low{
		border-left: 1px solid black;
		width: 11px;
	}
}
